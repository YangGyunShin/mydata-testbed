<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default-layout}">
<head>
  <title>회원가입 - 약관동의</title>
  <th:block layout:fragment="css">
    <link rel="stylesheet" th:href="@{/css/sub-page.css}">
    <link rel="stylesheet" th:href="@{/css/form.css}">
  </th:block>
</head>
<body>
<main layout:fragment="content">
  <!-- 페이지 배너 -->
  <th:block th:replace="~{fragments/page-banner :: page-banner('회원가입', '마이데이터 테스트베드 회원이 되어보세요.')}"></th:block>

  <!-- 브레드크럼 -->
  <th:block th:replace="~{fragments/breadcrumb :: breadcrumb(${
        T(java.util.Arrays).asList(
            new T(java.util.LinkedHashMap)().tap({ it.put('name', '회원'); it.put('url', '#'); }),
            new T(java.util.LinkedHashMap)().tap({ it.put('name', '회원가입'); it.put('url', '/member/signup/step1'); })
        )
    })}"></th:block>

  <!-- 회원가입 폼 -->
  <div class="form-page form-page-wide">
    <div class="form-container">
      <!-- 단계 표시 -->
      <div class="step-indicator">
        <div class="step-indicator-item active">
          <span class="step-number-indicator">1</span>
          <span class="step-indicator-label">약관동의</span>
        </div>
        <div class="step-indicator-item">
          <span class="step-number-indicator">2</span>
          <span class="step-indicator-label">휴대폰 인증</span>
        </div>
        <div class="step-indicator-item">
          <span class="step-number-indicator">3</span>
          <span class="step-indicator-label">회원정보 입력</span>
        </div>
        <div class="step-indicator-item">
          <span class="step-number-indicator">4</span>
          <span class="step-indicator-label">이메일 인증</span>
        </div>
      </div>

      <h2 class="form-title">약관동의</h2>

      <!-- 에러 메시지 -->
      <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>

      <form th:action="@{/member/signup/step1}" method="post">
        <!-- 전체 동의 -->
        <div class="all-agree">
          <div class="form-check">
            <input type="checkbox" id="allAgree">
            <label for="allAgree">전체 약관에 동의합니다.</label>
          </div>
        </div>

        <!-- 이용약관 -->
        <div class="terms-box">
          <div class="terms-header">
            <div class="form-check">
              <input type="checkbox" id="termsAgreed" name="termsAgreed" value="true" required>
              <label for="termsAgreed">[필수] 이용약관에 동의합니다.</label>
            </div>
            <button type="button" class="terms-toggle">보기</button>
          </div>
          <div class="terms-content">
            <h4>제1조 (목적)</h4>
            <p>이 약관은 금융보안원(이하 "회사")이 제공하는 마이데이터 테스트베드 서비스(이하 "서비스")의 이용과 관련하여 회사와 회원 간의 권리, 의무 및 책임사항, 기타 필요한 사항을 규정함을 목적으로 합니다.</p>

            <h4>제2조 (정의)</h4>
            <p>1. "서비스"란 회사가 제공하는 마이데이터 API 테스트 환경 및 관련 서비스를 말합니다.</p>
            <p>2. "회원"이란 이 약관에 동의하고 서비스를 이용하는 자를 말합니다.</p>

            <h4>제3조 (약관의 효력)</h4>
            <p>이 약관은 서비스를 이용하고자 하는 모든 회원에게 적용됩니다.</p>
          </div>
        </div>

        <!-- 개인정보처리방침 -->
        <div class="terms-box">
          <div class="terms-header">
            <div class="form-check">
              <input type="checkbox" id="privacyAgreed" name="privacyAgreed" value="true" required>
              <label for="privacyAgreed">[필수] 개인정보처리방침에 동의합니다.</label>
            </div>
            <button type="button" class="terms-toggle">보기</button>
          </div>
          <div class="terms-content">
            <h4>1. 개인정보의 수집 및 이용목적</h4>
            <p>회사는 다음의 목적을 위하여 개인정보를 처리합니다.</p>
            <p>- 회원 가입 및 관리: 회원제 서비스 제공에 따른 본인 확인, 서비스 부정이용 방지</p>
            <p>- 서비스 제공: 마이데이터 API 테스트 환경 제공</p>

            <h4>2. 수집하는 개인정보 항목</h4>
            <p>- 필수항목: 이메일, 비밀번호, 이름, 휴대폰번호</p>
            <p>- 선택항목: 소속회사, 부서</p>

            <h4>3. 개인정보의 보유 및 이용기간</h4>
            <p>회원 탈퇴 시까지 또는 관계 법령에 따른 보존기간까지</p>
          </div>
        </div>

        <!-- 버튼 -->
        <div class="form-actions">
          <a th:href="@{/}" class="btn btn-secondary">취소</a>
          <button type="submit" class="btn btn-primary">다음 단계</button>
        </div>
      </form>
    </div>
  </div>
</main>

<th:block layout:fragment="script">
  <script th:src="@{/js/common.js}"></script>
</th:block>
</body>
</html>